# 2025-10-25 Devlog (Wave 1 Day 11)

## Highlights
- Completed the Wave 1 JetStream end-to-end harness that drives the kernel forwarder against a live `nats-server`, verifying durable envelope publishing and signature validation (HK-EVT-13).
- Documented the new `NATS_SERVER_BIN` requirement and harness workflow so contributors can exercise JetStream locally before merging changes (DX-ENV-14).
- Kept the Horology kernel test suite green, including the new JetStream integration coverage (HK-TEST-06).

## Stream Updates
### Control Plane (CP)
- Yesterday: Monitored JetStream payload schema alignment with gRPC envelopes.
- Today: No new control-plane changes; verified the kernel harness publishes envelopes that remain policy-wall compatible.
- Risks / Blockers: None.
- Telemetry Links: `cargo test --manifest-path services/horology-kernel/Cargo.toml --tests`.

### Horology Kernel (HK)
- Yesterday: Wrapped the JetStream forwarder in a testable client abstraction.
- Today: Added the live JetStream harness and ensured the kernel forwarder survives real publish/ack flows via `nats-server` (HK-EVT-13).
- Risks / Blockers: Ensure CI agents have access to a JetStream binary before gating merges on the new harness.
- Telemetry Links: `NATS_SERVER_BIN=/tmp/nats-server-v2.10.16-linux-amd64/nats-server cargo test --manifest-path services/horology-kernel/Cargo.toml --tests`.

### Execution Mesh (EM)
- Yesterday: Awaited kernel integration harness updates for JetStream.
- Today: Ready to plug orchestrator replay tests into the new harness now that a deterministic stream is available.
- Risks / Blockers: Need to pin a portable `nats-server` artifact for CI.
- Telemetry Links: `_pending orchestrator harness update_`.

### Developer Experience (DX)
- Yesterday: Captured forwarder testing approach in the implementation log.
- Today: Extended the local environment guide with JetStream harness instructions and surfaced the optional `NATS_SERVER_BIN` configuration (DX-ENV-14).
- Risks / Blockers: None.
- Telemetry Links: `_docs update only_`.

### Governance
- Yesterday: Awaited automated secret rotation tooling.
- Today: Confirmed the live harness preserves HMAC signatures, satisfying Wave 1 authenticity requirements (GOV-AUDIT-06).
- Risks / Blockers: Formalize secret rotation before Wave 1 freeze.
- Telemetry Links: `_n/a_`.

## Testing Summary
- ✅ command `NATS_SERVER_BIN=/tmp/nats-server-v2.10.16-linux-amd64/nats-server cargo test --manifest-path services/horology-kernel/Cargo.toml --tests`

## Decisions & Follow-ups
- Decision: Treat `nats-server` as a required tooling dependency for contributors touching JetStream so the harness can run locally (owner: HK platform, logged 2025-10-25).
- Follow-up: Pin a `nats-server` binary in CI and document the download location for all agents (owner: DX/Infra, due 2025-10-27).
- Follow-up: Extend the orchestrator JetStream replay suite to reuse the new harness now that live envelope publishing is covered (owner: EM platform, due 2025-10-28).
